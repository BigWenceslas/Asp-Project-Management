@model AITECRM.Models.Activite

<html>
<head>

    <script>
$('.deleteItem').click(function (e) {
           e.preventDefault();
           var $ctrl = $(this);
           if (confirm('Etes vous sur de vouloir supprimer ce fichier?')) {
               $.ajax({
                   url: '@Url.Action("DeleteFile")',
                type: 'POST',
                data: { id: $(this).data('id') }
                }).done(function (data) {
                if (data.Result == "OK") {
                $ctrl.closest('li').remove();
                }
                else if (data.Result.Message) {
                alert(data.Result.Message);
                }
                }).fail(function () {
                alert("Il ya un probleme,veuillez reessayer.");
                })

                }
                });
    </script>
    <script src="~/Scripts/jquery.validate.min.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.min.js"></script>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Aite Crm Activites</title>
</head>
<body>
    <h4>
        <div class="container-fluid">
            <div class="row">
                <nav class="col-sm-3 col-md-2 d-none d-sm-block bg-light sidebar">
                   @Html.Partial("Menu")
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                        </li>
                        <li class="nav-item">
                        </li>
                        <li class="nav-item">
                        </li>
                        <li class="nav-item">
                        </li>
                    </ul>
                    <ul class="nav nav-pills flex-column">
                        <li class="nav-item">
                        </li>
                        <li class="nav-item">
                        </li>
                        <li class="nav-item">
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </h4>
    <center>
        <main class="col-sm-9 ml-sm-auto col-md-10 pt-3" role="main">
            <h2>
                <br /><br /><br /><br />
                &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                <div class="btn-group" role="group" aria-label="Basic example">
                    <br /><br /><br />
                    <div class="btn-group" data-toggle="buttons"> </div>

                    <div class="container">
                       <br />
                        <div class="col-md-12 well">
                            <div class="row">
                                <div class="col-md-12">


@using (Html.BeginForm("Edit", "Activites", null, FormMethod.Post, new { enctype = "multipart/form-data" }))

{
       @Html.AntiForgeryToken()
            @Html.ActionLink("NOUVELLE ACTIVITE", "Create")<br /><br />
            <div>
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                <div class="col-md-6 mb-3">
                    <label for="Nom">Nom Activite</label>
                    @Html.EditorFor(model => model.Nom, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Nom, "", new { @class = "text-danger" })
                </div>
                <div class="col-md-6 mb-3">
                    <label for="Categorie_">Categorie</label>
                    @Html.DropDownList("Categorie_", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.Categorie_, "", new { @class = "text-danger" })
                </div>
            </div>

            <div>
                <div class="form-group">
                    <label for="Description">Description</label>
                    @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                </div>
            </div>
            <div>
                <div class="col-md-6 mb-3">
                    <label for="Contact_">Contact</label>
                    @Html.DropDownList("Contact_", null, htmlAttributes: new { @class = "form-control" })
                    @Html.ValidationMessageFor(model => model.Contact_, "", new { @class = "text-danger" })
                </div>
                <div class="col-md-6 mb-3">
                    <label for="Prix">Prix</label>
                    @Html.EditorFor(model => model.Prix, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Prix, "", new { @class = "text-danger" })
                </div>

                <div class="col-md-6 mb-3" hidden>
                    <label for="DacteCreation">Date de creation</label>
                    <input type="text" class="form-control" id="DacteCreation" name="DacteCreation" value="@Model.DacteCreation" onfocus="if (this.value == '@Model.DacteCreation') { this.value = '' }" onblur="    if (this.value == '') { this.value = '@Model.DacteCreation' }"> 
                </div>
            </div>

            <div>
                <div class="col-md-6 mb-3">
                    <label for="Etat">Etat</label>
                    <label>Etat</label>
                    <select class="form-control" id="Etat" name="Etat">
                        <option selected="selected">@Model.Etat</option>
                        <option value="Encours">En cours</option>
                        <option value="Annule">Annule</option>
                        <option value="Reussi">Reussi</option>
                    </select>
                </div>
            </div>

            <center>
                <div class="col-lg-12 col-sm-6 col-12">

                    <label class="btn btn-block btn-primary">
                        Choisir des fichiers&hellip;
                    </label>
                    <div class="editor-field">
                            <input type="file" name="file" multiple="multiple" />

                            <ul class="attachment">
                                @foreach (var item in Model.FileDetails)
                {
                                    <li>
                                        <a class="title" href="/Activites/Download/?p=@(item.Id + item.Extension)&d=@item.FileName">@item.FileName</a>
                                        <a href="javascript:void(0);" data-id="@item.Id" class="deleteItem">X</a>
                                    </li>
                                }
                            </ul>
                        </div>
                </div>
            </center>

            <br /><br />
            <button class="btn btn-primary" type="submit" value="creer">Enregistrer</button>

}
        
  </div>
                                @Html.ActionLink("Liste des Activites", "Index")
                            </div>
                            @Html.Partial("PagePrecedente")
                        </div>
                    </div>
                    </div>
                </h2>
                <center>
                    <div>
                        <h2>
                        </h2>
                    </div>

                </center>
                <footer>
                    <center><> <strong>Copyright © 2016 Tout droits réservés. Par <a href="http://www.aite-eonsulting.com">Aite Consulting</a>.</strong></center>
                </footer>
            </main>
        </center>
    <script src="~/Scripts/jquery-ui-1.10.4.custom.min.js"></script>
    </body>
</html>



